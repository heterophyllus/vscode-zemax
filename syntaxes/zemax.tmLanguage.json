{
	"$schema": "https://raw.githubusercontent.com/martinring/tmlanguage/master/tmlanguage.json",
	"name": "Zemax",
	"scopeName": "source.zemax",
	"patterns":[
		{
			"match": "(#|!).*$",
			"name": "comment.line.zemax"
		},
		{
			"match": "^\\s*((?i)REM)\\s+.*$",
			"captures":{
			   "0":{
				  "name": "comment.line.zemax"
			   },
			   "1":{
				  "name": "keyword.comment.zemax"
			   }
			}
		},
		{
			"match": "(?<![\\d.])\\s0x[a-fA-F\\d]+|\\b\\d+(\\.\\d+)?([eE]-?\\d+)?|\\.\\d+([eE]-?\\d+)?",
			"name": "constant.numeric.zemax"
		},
		{
		 	"begin": "'",
		 	"end": "'",
		 	"name": "string.quoted.single.zemax"
		},
		{
			"begin": "\"",
			"end": "\"",
			"name": "string.quoted.double.zemax"
	   	},
		{
			"match": "^\\s*((?i)DECLARE)\\b",
			"name": "storage.modifier.zemax"
		},
		{
			"match": "\\b((?i)INTEGER|DOUBLE)\\b",
			"name": "storage.type.zemax"
		},
		{
			"match": "\\b([a-zA-Z0-9_]+)(\\$)\\b",
			"captures":{
			   "1":{
				  "name": "variable.string.zemax"
			   },
			   "2":{
				  "name": "punctuation.definition.variable.string.zemax"
			   }
			}
		},
		{
			"match": "\\b((?i)FOR|NEXT|IF|THEN|ELSE|ENDIF|GOTO|LABEL|SUB|RETURN)\\b",
			"name": "keyword.control.zemax"
		},
		{
			"match": "\\b((?i)ABSO|ACOS|APMN|APMX|APOI|APXD|APYD|APTP|ASIN|ASPR|ATAN|ATYP|AVAL|CALD|CONF|CONI|COSI|CURV|EDGE|EOFF|ETIM|EXPE|EXPT|FICL|FLDX|FLDY|FTYP|FVAN|FVCX|FVCY|FVDX|FVDY|FWGT|GABB|GAUS|GETT|GIND|GLCA|GLCB|GLCC|GLCM|GLCX|GLCY|GLCZ|GNUM|GPAR|GRIN|GTEM|IMAE|INDX|INTE|ISMS|LOGE|LOGT|LOST|MAGN|MAXF|MAXG|MCON|MCOP|MFCN|MCON|MFLD|NOBJ|NPAR|NPOS|NPRO|NSDC|NSDD|NSDE|NSDP|NSUR|NWAV|OBJC|OCOD|ONUM|OPDC|OPER|OPEV|OPEW|OPTH|PARM|PIXX|PIXY|PMOD|POWR|PVHX|PVHY|PVPX|PVPY|PWAV|RADI|RAGL|RAGM|RAGN|RAGX|RAGY|RAGZ|RAND|RANX|RANY|RANZ|RAYE|RAYL|RAYM|RAYN|RAYO|RAYT|RAYTRAYV|RAYX|RAYY|RAYZ|RELI|SAGG|SCOM|SDIA|SIGN|SINE|SLEN|SOLM|SOLV|SOSO|SPRO|SPRX|SQRT|STDD|SURC|SVAL|SYPR|TANG|TMAS|THIC|TOLV|UNIT|VEC1|VEC2|VEC3|VEC4|VERS|WAVL|WINL|WINN|WWGT|XMIN|XMAX|YMIN|YMAX)(\\()",
			"captures": {
				"1":{
					"name": "support.function.zemax"
				},
				"2":{
					"name": "punctuation.bracket.left.zemax"
				}
			}
		},
		{
			"comment": "string functions",
			"match": "(\\$|\\b)((?i)BUFFER|CALLSTR|COAT|COATINGPATH|COMMENT|DATAPATH|DATE|EXTENSIONPATH|FILENAME|FILEPATH|GETSTRING|GETSTRINGC|GLASS|GLASSCATALOG|GLASSPATH|LEFTSTRING|LENSNAME|MACROPATH|NOTE|OBJECTPATH|PATHNAME|PROGRAMPATH|QUOTE|RIGHTSTRING|STR|TEMPFILENAME|TOLCOMMENT|TOLOPERAND|UNITS)(\\()",
			"captures": {
				"2":{
					"name": "support.function.zemax"
				},
				"3":{
					"name": "punctuation.bracket.left.zemax"
				}
			}
		},
		{
			"comment": "other keywords",
			"match": "\\b((?i)APMN|APMX|APTP|APXD|APYD|ATYP|AVAL|BEEP|CALLMACRO|CALLSETDBL|CALLSETSTR|COAT|CLOSE|CLOSEWINDOW|COLOR|COMMAND|COMMENT|CONI|COPYFILE|CURV|DATE|DEFAULTMERIT|DELETE|DELETECONFIG|DELETEFILE|DELETEMCO|DELETEMFO|DELETEOBJECT|DELETETOL|EDVA|END|EXPORTBMP|EXPORTCAD|EXPORTJPG|EXPORTWMF|FINDFILE|FLDX|FLDY|FWGT|FVDX|FVDY|FVCX|FVCY|FORMAT|FTYP|GCRS|GDATE|GETEXTRADATA|GETGLASSDATA|GETLSF|GETMTF|GETPSF|GETSYSTEMDATA|GETTEXTFILE|GETVARDATA|GETZERNIKE|GLAS|GLENSNAME|GLOBALTOLOCAL|GOSUB|GOTOSUB|GRAPHICS|GTEXT|GTEXTCENT|GTITLE|HAMMER|IMA|IMAGECOMBINE|IMAGEEXTRACT|IMASHOW|IMASUM|IMPORTEXTRADATA|INPUT|INSERT|INSERTCONFIG|INSERTMCO|INSERTMFO|INSERTOBJECT|INSERTTOL|LABEL|LINE|LOADARCHIVE|LOADCATALOG|LOADDETECTOR|LOADLENS|LOADMERIT|LOADTOLERANCE|LOCALTOGLOBAL|LOCKWINDOW|MAKEFACETLIST|MAKEFOLDER|MODIFYSETTINGS|NSLT|NSTR|NUMFIELD|NUMWAVE|OPEN|OPENANALYSISWINDOW|OPTIMIZE|OPTRETURN|OUTPUT|PARM|PARAXIAL|PAUSE|PIXEL|PLOT|PLOT2D|POLDEFINE|POLTRACE|POP|PRINT|PRINTFILE|PRINTWINDOW|PWAV|QUICKFOCUS|RADI|RANDOMIZE|RAYTRACE|RAYTRACEX|READ|READNEXT|READSKIP|READSTRING|RELEASE|RELOADOBJECTS|REMOVEVARIABLES|RENAMEFILE|RETURN|REWIND|SAVEARCHIVE|SAVEDETECTOR|SAVELENS|SAVEMERIT|SAVETOLERANCE|SAVEWINDOW|SCATTER|SDIA|SETAIM|SETAIMDATA|SETAPODIZATION|SETCONFIG|SETDETECTOR|SETMCOPERAND|SETNSCPARAMETER|SETNSCPOSITION|SETNSCPROPERTY|SETOPERAND|SETSTDD|SETSURFACEPROPERTY|SURP|SETSYSTEMPROPERTY|SYSP|SETTEXTSIZE|SETTITLE|SETTOL|SETUNITS|SETVAR|SETVECSIZE|SETVIG|SHOWBITMAP|SHOWFILE|SOLVERETURN|SOLVETYPE|STOPSURF|SUB|SURFTYPE|TELECENTRIC|TESTPLATEFIT|THIC|TIMER|UNLOCKWINDOW|UPDATE|VEC1|VEC2|VEC3|VEC4|WAVL|WWGT|XDIFFIA|ZBF2MAT|ZBFCLR|ZBFMULT|ZBFPROPERTIES|ZBFREAD|ZBFRESAMPLE|ZBFSHOW|ZBFSUM|ZBFTILT|ZBFWRITE|ZRD2MAT|ZRDAPPEND|ZRDFILTER|ZRDSAVERAYS|ZRDSUM)(\\s|,|$)",
			"captures": {
				"1":{
					"name": "keyword.language.zemax"
				}
			}
		}
	]
}